<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
    <% include ./partials/head %>
</head>

<body>
    <header>
        <% include ./partials/header %>
    </header>

    <main>
        <div class='row' id="non-printable">
            <form method="post" style="padding-left: 2em;" id="searchForm">
            <div class='col-md-12'>
                    <div class='form-row'>
                        <div class="col-md-4">
                            <input type="text" class="form-control" placeholder='Course Code' id='inputCC' name='Course Code'>
                        </div>
                          <div class="col-md-4">
                            <select name="inputDayAssigned" id = "inputDayAssigned">
                                <option value="M">Monday</option>
                                <option value="T">Tuesday</option>
                                <option value="W">Wednesday</option>
                                <option value="TH">Thursday</option>
                                <option value="F">Friday</option>
                                <option value="SAT">Saturday</option>
                                
                            </select>
                        </div>
                    </div>
                    <br>
                   
              </div>
            <div class='col-md-12'>
                    <div class='form-row'>
                      
                        <div class="col-md-6">
                            <input type="text" class="form-control" placeholder='Room #/Room Name' id='inputRN' name='Room Name'>
                        </div>
                        
                        <div class="col-md-4">
                            <input type="number" class="form-control" placeholder='Group #' id='inputGN' name='Group Number '>
                        </div>
                        
                          
                    </div>
                    <br>
                   
              </div>
             <div class='col-md-12'>
                    <div class='form-row'>
                        
                      <div class="col-md-4">
                            <input type="time" class="form-control" placeholder='Start Time' id='inputStartTime' name='Start Time'>
                        </div>
                        <p style="color: white; font-size: 24px"> to </p>
                        <div class="col-md-4">
                            <input type="time" class="form-control" placeholder='End Time' id='inputEndTime' name='End Time'>
                        </div>
                        
                        
                    </div>
                    <br>
                   
              </div>
                
                    <div class='col-md-4'>
                            <button type="button" style="width: 85%" id="enterBtn" class="btn btn-info">
                                <span id="refresh-spinner">
                                    <span id="refresh-label">Enter</span>
                                </span>
                            </button>
                        </div>
                
            </form>
        </div>
        
        <div>
            <h2 id="notificationmessage" style="color:white;">- -</h2>
        </div>
        <br>

    </main>

    <footer>
        <% include ./partials/footer %>
    </footer>

</body>

</html>
<script>
    $(document).ready(function() {
        $(".toggle-printable-btn").on("click", function() {
            button.togglePrint();
        });

        $("#printBtn").on("click", function() {
            if($(".toggle-printable-btn").hasClass("btn-outline-light")){
                button.togglePrint();
            }
            window.print();
        });

        $("#enterBtn").on("click", function() {
            
            var sendRoom = {};
            
            sendRoom.courseCode = $("#inputCC").val();
            sendRoom.roomID = 0;
            sendRoom.dayAssigned = $("#inputDayAssigned").val();
            sendRoom.roomNumber = $("#inputRN").val();
            sendRoom.groupNumber = $("#inputGN").val();
            sendRoom.startTime = $("#inputStartTime").val();
            sendRoom.endTime = $("#inputEndTime").val();
            console.log(sendRoom);
            
              $.ajax({
                url: '/setRoomAssignments',
                type: 'GET',
                contentType: 'application/json; charset-utf-8',
                dataType: 'json',
                data: sendRoom,
                success: function(data) {
                   $("#notificationmessage").html("Course '" + data.courseCode + "', Group No. '" +data.groupNumber + "' has been assigned to Room '" + data.roomNumber + "' into the database.");
                    
                },
                error: function(xhr, exception) {
                    console.log("Error " + xhr.status + ": " + exception.toString());
                    console.log("yeehaw");
                    //button.error();
                }
            })
        });
        
    });

</script>
